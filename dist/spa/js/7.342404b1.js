(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{6108:function(t,e,a){},"8ed2":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-blue-grey-1"},[a("div",{staticClass:"row q-mt-xs"},[a("div",{staticClass:"col-12 col-sm-1 col-md-2 col-lg-3"}),a("div",{staticClass:"col-12 col-sm-10 col-md-8 col-lg-6",staticStyle:{"padding-left":"10px!important","padding-right":"10px!important"}},[a("q-btn",{staticClass:"q-p-xs",staticStyle:{float:"right!important",display:"inline-block!important","font-size":"12px!important"},attrs:{size:"sm",color:"cyan-9"},on:{click:function(e){return t.modal()}}},[t._v("\n          NUEVO CLIENTE\n        ")])],1),a("div",{staticClass:"col-12 col-sm-1 col-md-2 col-lg-3"})]),t.listaClientes.length>0?a("div",{staticClass:"row q-mt-xs"},[a("div",{staticClass:"col-12 col-sm-1 col-md-2 col-lg-3"}),a("div",{staticClass:"col-12 col-sm-10 col-md-8 col-lg-6",staticStyle:{"padding-left":"10px!important","padding-right":"10px!important"}},[a("q-table",{staticClass:" q-mb-md text-black shadow-17",staticStyle:{background:"transparent !important"},attrs:{data:t.listaClientes,columns:t.nombreColumnas,"row-key":"name",separator:"cell",dense:"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"bg-blue-grey-1",staticStyle:{"font-size":"15px!important"},attrs:{props:e}},[a("q-td",{key:"nombre",staticClass:"text-left q-p-xs",staticStyle:{"font-size":"13px!important"},attrs:{props:e}},[t._v(" "+t._s(e.row.nom)+" ")]),a("q-td",{key:"direccion",staticClass:"text-left q-p-xs",staticStyle:{"font-size":"13px!important"},attrs:{props:e}},[t._v(" "+t._s(e.row.dir)+" ")]),a("q-td",{key:"fono",staticClass:"text-center q-p-xs",staticStyle:{"font-size":"13px!important"},attrs:{props:e}},[t._v(" "+t._s(e.row.fono)+" ")]),a("q-td",{key:"accion",staticClass:"text-center q-p-xs",staticStyle:{"font-size":"13px!important"}},[a("q-btn",{attrs:{round:"",flat:"",padding:"none",icon:"delete",size:"14px",color:"blue-grey-10 q-mr-sm"},on:{click:function(a){return t.modalEliminar(e.row)}}}),a("q-btn",{attrs:{round:"",flat:"",padding:"none",icon:"edit",size:"14px",color:"blue-grey-10"},on:{click:function(a){return t.modal(e.row)}}})],1)],1)]}},{key:"pagination",fn:function(e){return[e.pagesNumber>2?a("q-btn",{staticClass:"text-white",attrs:{icon:"first_page",square:"",dense:"",flat:"",disable:e.isFirstPage},on:{click:e.firstPage}}):t._e(),a("q-btn",{staticClass:"text-white",attrs:{icon:"chevron_left",square:"",dense:"",flat:"",disable:e.isFirstPage},on:{click:e.prevPage}}),a("q-btn",{staticClass:"text-white",attrs:{icon:"chevron_right",square:"",dense:"",flat:"",disable:e.isLastPage},on:{click:e.nextPage}}),e.pagesNumber>2?a("q-btn",{staticClass:"text-white",attrs:{icon:"last_page",square:"",dense:"",flat:"",disable:e.isLastPage},on:{click:e.lastPage}}):t._e()]}}],null,!1,2019908860)})],1),a("div",{staticClass:"col-12 col-sm-1 col-md-2 col-lg-3"})]):t._e(),0===t.listaClientes.length&&t.mostrarCircular?a("q-inner-loading",{attrs:{showing:!0}},[a("q-circular-progress",{staticClass:"q-ma-md",attrs:{indeterminate:"",size:"75px",thickness:1,color:"teal-6","center-color":"blue"}})],1):t._e(),a("div",[a("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[a("q-card",{staticClass:"bg-cyan-9 q-pt-xs",staticStyle:{width:"300px!important"}},[a("div",{staticClass:"row",staticStyle:{padding:"0px 10px!important"}},[a("div",{staticClass:"col-12",staticStyle:{padding:"0px 5px!important"}},[a("q-input",{attrs:{label:"Nombre Cliente",maxlength:"20",dense:!0,type:"text",clearable:""},model:{value:t.form.nombre,callback:function(e){t.$set(t.form,"nombre",e)},expression:"form.nombre"}})],1)]),a("div",{staticClass:"row",staticStyle:{padding:"0px 10px!important"}},[a("div",{staticClass:"col-12",staticStyle:{padding:"0px 5px!important"}},[a("q-input",{staticStyle:{"font-size":"12px!important"},attrs:{id:"nombreMercadoTxt",label:"Dirección",dense:!0,type:"text",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.guardar(e)}},model:{value:t.form.direccion,callback:function(e){t.$set(t.form,"direccion",e)},expression:"form.direccion"}})],1)]),a("div",{staticClass:"row",staticStyle:{padding:"0px 10px!important"}},[a("div",{staticClass:"col-12",staticStyle:{padding:"0px 5px!important"}},[a("q-input",{staticStyle:{"font-size":"12px!important"},attrs:{maxlength:"9",label:"Fono",dense:!0,type:"text",clearable:""},on:{keyup:t.fonoCambio},model:{value:t.form.fono,callback:function(e){t.$set(t.form,"fono",e)},expression:"form.fono"}})],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"grey-10"}}),a("q-btn",{attrs:{label:"GUARDAR",color:"blue-grey-10"},on:{click:t.guardar}})],1)],1)],1),a("ModalEliminar",{ref:"modalEliminar"})],1)],1)},i=[],s=a("ded3"),n=a.n(s),r=(a("e6cf"),a("bc3a")),l=a.n(r),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{model:{value:t.mostrar,callback:function(e){t.mostrar=e},expression:"mostrar"}},[a("q-card",{staticClass:"bg-blue-grey-10"},[a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{staticStyle:{"font-size":"35px!important"},attrs:{name:"error",color:"red-4","text-color":"white"}}),a("span",{staticClass:"q-ml-sm text-white"},[t._v("Se eliminará "),a("b",[t._v(t._s(t.nombre))]),t._v(", Continuar?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cancelar",color:"red-4"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"eliminar",color:"teal-7"},on:{click:t.eliminar}})],1)],1)],1)},d=[],m=a("2f62");const p={"Content-Type":"application/json",headers:{"x-access-token":localStorage.getItem("token")}};var f={data(){return{nombre:"VAINA",mostrar:!1,idCliente:""}},computed:n()({},Object(m["c"])(["url"])),methods:n()(n()({},Object(m["b"])(["setListaClientes"])),{},{async eliminar(){try{const t=await l.a.post(`${this.url}borrarCliente`,{id:this.idCliente},p);200===t.status&&(this.showNotif("top",t.data.mensaje,t.data.icono,t.data.color,"black"),this.traerClientes())}catch(t){this.showNotif("top","El servidor no responde, no se pudo eliminar!","error","red-4","black")}},showNotif(t,e,a,o,i){this.$q.notify({color:o,textColor:i,icon:a,message:e,position:t,multiLine:!0,group:!0,timeout:2e3,html:!0,classes:"non-selectable"})},async traerClientes(){try{let t=await l.a.get(`${this.url}traerClientes`,p);t.data.icono?this.showNotif("top",t.data.mensaje,t.data.icono,t.data.color,"black"):this.setListaClientes(t.data)}catch(t){}}})},u=f,b=a("2877"),h=a("24e8"),g=a("f09f"),C=a("a370"),x=a("0016"),y=a("4b7e"),w=a("9c40"),q=a("7f67"),v=a("eebe"),k=a.n(v),_=Object(b["a"])(u,c,d,!1,null,null,null),N=_.exports;k()(_,"components",{QDialog:h["a"],QCard:g["a"],QCardSection:C["a"],QIcon:x["a"],QCardActions:y["a"],QBtn:w["a"]}),k()(_,"directives",{ClosePopup:q["a"]});const S={"Content-Type":"application/json",headers:{"x-access-token":localStorage.getItem("token")}};var E={name:"PageIndex",components:{ModalEliminar:N},data(){return{mostrarCircular:!0,alert:!1,listaRegistros:[],form:{nombre:"",direccion:"",fono:"",id:""},pagination:{sortBy:"desc",descending:!0,page:1,rowsPerPage:20},nombreColumnas:[{name:"nombre",field:"nombre",align:"center",label:"NOMBRE",headerClasses:"bg-blue-9 text-white"},{name:"direccion",field:"direccion",align:"center",label:"DIRECCIÓN",headerClasses:"bg-blue-9 text-white"},{name:"fono",field:"fono",align:"center",label:"FONO",headerClasses:"bg-blue-9 text-white"},{name:"accion",field:"accion",align:"center",label:"ACCIÓN",headerClasses:"bg-blue-9 text-white"}]}},methods:n()(n()({},Object(m["b"])(["setUsuario","setListaClientes","setNombrePagina"])),{},{async traerClientes(){try{let t=await l.a.get(`${this.url}traerClientes`,S);t.data.icono?(this.showNotif("top",t.data.mensaje,t.data.icono,t.data.color,"black"),this.mostrarCircular=!1):this.setListaClientes(t.data)}catch(t){this.showNotif("top","El servidor no responde!","error","red-4","black")}},modalEliminar(t){this.$refs.modalEliminar.nombre=t.nom,this.$refs.modalEliminar.idCliente=t._id,this.$refs.modalEliminar.mostrar=!0},modal(t){t?(this.form.nombre=t.nom,this.form.direccion=t.dir,this.form.id=t._id,this.form.fono=t.fono):(this.form.nombre="",this.form.direccion="",this.form.fono="",this.form.id=""),this.alert=!0},guardar(){""!==this.form.nombre?l.a.post(`${this.url}nuevoMercado`,this.form,S).then(function(t){this.alert=!this.alert,200===t.status&&(this.showNotif("top",t.data.mensaje,t.data.icono,t.data.color,"black"),this.traerClientes())}.bind(this)).catch(function(t){this.showNotif("top","El servidor no responde, no se pudo guardar!","error","red-4","black")}.bind(this)):this.showNotif("top","Debe ingresar un nombre!","error","yellow-14","black")},showNotif(t,e,a,o,i){this.$q.notify({color:o,textColor:i,icon:a,message:e,position:t,multiLine:!0,group:!0,timeout:2e3,html:!0,classes:"non-selectable"})},fonoCambio:function(){let t=this.form.fono.substr(this.form.fono.length-1,1).charCodeAt();(t<48||t>57)&&(this.form.fono=this.form.fono.substr(0,this.form.fono.length-1))}}),watch:{"form.nombre":function(t,e){if(null!==t&&""!==t){function a(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}this.form.nombre=t.split(" ").map(a).join(" ")}else this.form.nombre=""},"form.direccion":function(t,e){null===t&&(this.form.direccion="")}},mounted(){const t=localStorage.getItem("usuario");t&&(this.setUsuario(t),this.traerClientes()),this.setNombrePagina("Clientes")},computed:n()({},Object(m["c"])(["usuario","url","nombrePagina","permisos","listaClientes"]))},P=E,Q=(a("e9ff"),a("eaac")),$=a("bd08"),j=a("db86"),z=a("74f7"),I=a("58ea"),L=a("27f9"),O=a("8572"),A=Object(b["a"])(P,o,i,!1,null,null,null);e["default"]=A.exports;k()(A,"components",{QBtn:w["a"],QTable:Q["a"],QTr:$["a"],QTd:j["a"],QInnerLoading:z["a"],QCircularProgress:I["a"],QDialog:h["a"],QCard:g["a"],QInput:L["a"],QCardActions:y["a"],QField:O["a"]}),k()(A,"directives",{ClosePopup:q["a"]})},e9ff:function(t,e,a){"use strict";a("6108")}}]);