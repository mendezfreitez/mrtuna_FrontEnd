(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"6d3a":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bg-blue-grey-1"},[e("div",{staticClass:"row q-mt-xs"},[e("div",{staticClass:"col-12 col-sm-1 col-md-2 col-lg-4"}),e("div",{staticClass:"col-12 col-sm-10 col-md-8 col-lg-4",staticStyle:{"padding-left":"10px!important","padding-right":"10px!important"}},[e("q-btn",{staticClass:"q-p-xs",staticStyle:{float:"right!important",display:"inline-block!important","font-size":"12px!important"},attrs:{size:"sm",color:"cyan-9"},on:{click:function(a){return t.modal()}}},[t._v("\n        NUEVO REPARTIDOR\n      ")])],1),e("div",{staticClass:"col-12 col-sm-1 col-md-2 col-lg-4"})]),t.listaRepartidores.length>0?e("div",{staticClass:"row q-mt-xs"},[e("div",{staticClass:"col-12 col-sm-1 col-md-2 col-lg-4"}),e("div",{staticClass:"col-12 col-sm-10 col-md-8 col-lg-4",staticStyle:{"padding-left":"10px!important","padding-right":"10px!important"}},[e("q-table",{staticClass:" q-mb-md text-black shadow-17",staticStyle:{background:"transparent !important"},attrs:{data:t.listaRepartidores,columns:t.nombreColumnas,"row-key":"nombre",separator:"cell",dense:"",pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"body",fn:function(a){return[e("q-tr",{staticClass:"bg-blue-grey-1",staticStyle:{"font-size":"15px!important"},attrs:{props:a}},[e("q-td",{key:"nombre",staticClass:"text-left q-p-xs",staticStyle:{"font-size":"13px!important"},attrs:{props:a}},[t._v(" "+t._s(a.row.nom)+" ")]),e("q-td",{key:"accion",staticClass:"text-center q-p-xs",staticStyle:{"font-size":"15px!important"}},[e("q-btn",{attrs:{round:"",flat:"",padding:"none",icon:"delete",size:"14px",color:"blue-grey-10 q-mr-sm"},on:{click:function(e){return t.modalEliminar(a.row)}}}),e("q-btn",{attrs:{round:"",flat:"",padding:"none",icon:"edit",size:"14px",color:"blue-grey-10"},on:{click:function(e){return t.modal(a.row)}}})],1)],1)]}},{key:"pagination",fn:function(a){return[a.pagesNumber>2?e("q-btn",{staticClass:"text-white",attrs:{icon:"first_page",square:"",dense:"",flat:"",disable:a.isFirstPage},on:{click:a.firstPage}}):t._e(),e("q-btn",{staticClass:"text-white",attrs:{icon:"chevron_left",square:"",dense:"",flat:"",disable:a.isFirstPage},on:{click:a.prevPage}}),e("q-btn",{staticClass:"text-white",attrs:{icon:"chevron_right",square:"",dense:"",flat:"",disable:a.isLastPage},on:{click:a.nextPage}}),a.pagesNumber>2?e("q-btn",{staticClass:"text-white",attrs:{icon:"last_page",square:"",dense:"",flat:"",disable:a.isLastPage},on:{click:a.lastPage}}):t._e()]}}],null,!1,2762066247)})],1),e("div",{staticClass:"col-12 col-sm-1 col-md-2 col-lg-4"})]):t._e(),0===t.listaRepartidores.length&&t.mostrarCircular?e("q-inner-loading",{attrs:{showing:!0}},[e("q-circular-progress",{staticClass:"q-ma-md",attrs:{indeterminate:"",size:"75px",thickness:1,color:"teal-6","center-color":"blue"}})],1):t._e(),e("div",[e("q-dialog",{model:{value:t.alert,callback:function(a){t.alert=a},expression:"alert"}},[e("q-card",{staticClass:"bg-cyan-9 q-pt-xs",staticStyle:{width:"300px!important"}},[e("div",{staticClass:"row",staticStyle:{padding:"0px 10px!important"}},[e("div",{staticClass:"col-12",staticStyle:{padding:"0px 5px!important"}},[e("q-input",{attrs:{maxlength:"20",label:"Nombre",dense:!0,type:"text",clearable:""},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.guardar(a)}},model:{value:t.form.nombre,callback:function(a){t.$set(t.form,"nombre",a)},expression:"form.nombre"}})],1)]),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"grey-10"}}),e("q-btn",{attrs:{label:"GUARDAR",color:"blue-grey-10"},on:{click:t.guardar}})],1)],1)],1),e("ModalEliminarRepartidor",{ref:"modalEliminarRepartidor"})],1)],1)},r=[],s=e("ded3"),i=e.n(s),n=(e("e6cf"),e("bc3a")),l=e.n(n),c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-dialog",{model:{value:t.mostrar,callback:function(a){t.mostrar=a},expression:"mostrar"}},[e("q-card",{staticClass:"bg-blue-grey-10"},[e("q-card-section",{staticClass:"row items-center"},[e("q-icon",{staticStyle:{"font-size":"35px!important"},attrs:{name:"error",color:"red-4","text-color":"white"}}),e("span",{staticClass:"q-ml-sm text-white"},[t._v("Se eliminará "),e("b",[t._v(t._s(t.nombre))]),t._v(", Continuar?")])],1),e("q-card-actions",{attrs:{align:"right"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"cancelar",color:"red-4"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"eliminar",color:"teal-7"},on:{click:t.eliminar}})],1)],1)],1)},d=[],p=e("2f62");const m={"Content-Type":"application/json",headers:{"x-access-token":localStorage.getItem("token")}};var u={data(){return{nombre:"VAINA",mostrar:!1,idRepartidor:""}},computed:i()({},Object(p["c"])(["url"])),methods:i()(i()({},Object(p["b"])(["setListaMercados","setRepartidores"])),{},{traerRepartidores(){l.a.get(`${this.url}traerRepartidores`,m).then(function(t){this.setRepartidores(t.data),t.data.icono&&this.showNotif("top",t.data.mensaje,t.data.icono,t.data.color,"black")}.bind(this))},eliminar(){l.a.post(`${this.url}borrarRepartidor`,{id:this.idRepartidor},m).then(function(t){200===t.status&&(this.showNotif("top",t.data.mensaje,t.data.icono,t.data.color,"black"),this.traerRepartidores())}.bind(this)).catch(function(t){this.showNotif("top","El servidor no responde, no se pudo eliminar!","error","red-4","black")}.bind(this))},showNotif(t,a,e,o,r){this.$q.notify({color:o,textColor:r,icon:e,message:a,position:t,multiLine:!0,group:!0,timeout:2e3,html:!0,classes:"non-selectable"})}})},b=u,f=e("2877"),g=e("24e8"),h=e("f09f"),C=e("a370"),x=e("0016"),w=e("4b7e"),y=e("9c40"),q=e("7f67"),k=e("eebe"),v=e.n(k),R=Object(f["a"])(b,c,d,!1,null,null,null),_=R.exports;v()(R,"components",{QDialog:g["a"],QCard:h["a"],QCardSection:C["a"],QIcon:x["a"],QCardActions:w["a"],QBtn:y["a"]}),v()(R,"directives",{ClosePopup:q["a"]});const N={"Content-Type":"application/json",headers:{"x-access-token":localStorage.getItem("token")}};var P={name:"PageIndex",components:{ModalEliminarRepartidor:_},data(){return{mostrarCircular:!0,tituloModal:"",alert:!1,listaRegistros:[],form:{nombre:"",id:""},pagination:{sortBy:"desc",descending:!0,page:1,rowsPerPage:15},nombreColumnas:[{name:"nombre",field:"nombre",align:"center",label:"NOMBRE",headerClasses:"bg-blue-9 text-white"},{name:"accion",field:"accion",align:"center",label:"ACCIÓN",headerClasses:"bg-blue-9 text-white"}]}},methods:i()(i()({},Object(p["b"])(["setUsuario","setListaMercados","setNombrePagina","setRepartidores"])),{},{async traerRepartidores(){try{let t=await l.a.get(`${this.url}traerRepartidores`,N);t.data.icono?(this.showNotif("top",t.data.mensaje,t.data.icono,t.data.color,"black"),this.mostrarCircular=!1):this.setRepartidores(t.data)}catch(t){this.showNotif("top","El servidor no responde!","error","red-4","black")}},modalEliminar(t){this.$refs.modalEliminarRepartidor.nombre=t.nom,this.$refs.modalEliminarRepartidor.idRepartidor=t._id,this.$refs.modalEliminarRepartidor.mostrar=!0},modal(t){t?(this.form.nombre=t.nom,this.form.id=t._id):(this.form.nombre="",this.form.id=""),this.alert=!0},async guardar(){if(""!==this.form.nombre)try{let t=await l.a.post(`${this.url}repartidores`,this.form,N);this.alert=!this.alert,200===t.status&&(this.showNotif("top",t.data.mensaje,t.data.icono,t.data.color,"black"),this.traerRepartidores())}catch(t){this.showNotif("top","El servidor no responde, no se pudo guardar!","error","red-4","black")}else this.showNotif("top","Debe ingresar un nombre!","error","yellow-14","black")},showNotif(t,a,e,o,r){this.$q.notify({color:o,textColor:r,icon:e,message:a,position:t,multiLine:!0,group:!0,timeout:2e3,html:!0,classes:"non-selectable"})}}),computed:i()({},Object(p["c"])(["usuario","url","nombrePagina","permisos","listaMercados","listaRepartidores"])),watch:{"form.nombre":function(t,a){if(null!==t&&""!==t){function e(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}this.form.nombre=t.split(" ").map(e).join(" ")}else this.form.nombre=""},"form.direccion":function(t,a){null===t&&(this.form.direccion="")}},mounted(){const t=localStorage.getItem("usuario");t&&(this.setUsuario(t),this.setNombrePagina("Repartidores"),this.traerRepartidores())}},Q=P,S=(e("fdac"),e("eaac")),E=e("bd08"),j=e("db86"),$=e("74f7"),I=e("58ea"),O=e("27f9"),z=e("8572"),A=Object(f["a"])(Q,o,r,!1,null,null,null);a["default"]=A.exports;v()(A,"components",{QBtn:y["a"],QTable:S["a"],QTr:E["a"],QTd:j["a"],QInnerLoading:$["a"],QCircularProgress:I["a"],QDialog:g["a"],QCard:h["a"],QCardSection:C["a"],QInput:O["a"],QCardActions:w["a"],QField:z["a"]}),v()(A,"directives",{ClosePopup:q["a"]})},fc64:function(t,a,e){},fdac:function(t,a,e){"use strict";e("fc64")}}]);